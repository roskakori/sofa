<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<html><head>
<title>Sofa Library - Make_sofa_version</title>
</head>

<body>
<h1>Make_sofa_version</h1>


<h2>Version</h2>

1.0

<h2>Description</h2>

<p>Make_sofa_version creates an Eiffel class with version information
accessible via attributes, including an AmigaOS version tag. It is to
some extend comparable with BumpRev from the NDK.</p>

<p>It simplifies keeping the programs output up to date concerning
version information, and supports AmigaOS-internal tools like the
<kbd>version</kbd> command or Installer's <tt>copylibs</tt>
statement.</p>

<h2>Author</h2>

Thomas Aglassinger &lt;agi@sbox.tu-graz.ac.at&gt;

<h2>Features</h2>

<ul>

<li>Allows to access version information using Eiffel attributes

<li>Automatically includes internal version tag into executable

</ul>

<h2>Template</h2>

<kbd>make_sofa_version to/k/a,version/n/a,revision/n/a,application/a,description/a,quiet/s</kbd>

<h2>Usage</h2>

<p>For example, the invocation</p>

<blockquote><kbd>make_sofa_version to=make_sofa_version_info 1 0 make_sofa_version "BumpRev for Eiffel"</kbd></blockquote>

<p>will create a class <tt>MAKE_SOFA_VERSION_INFO</tt> in the current
directory, which contains version information about an application
<tt>make_sofa_version</tt>. A short discription of this application is
"<tt>BumpRev for Eiffel</tt>". The current version is 1.0.
Essentially, the class will declare the following constants:</p>

<pre>
   version: INTEGER <b>is</b> 1
         -- <i>version number</i>

   revision: INTEGER <b>is</b> 0
         -- <i>revision number</i>

   date: STRING <b>is</b> "30.3.00"
         -- <i>date of last change</i>

   application: STRING <b>is</b> "make_sofa_version"
         -- <i>name of application</i>

   description: STRING <b>is</b> "BumpRev for Eiffel"
         -- <i>short description of</i> application
</pre>

<p>The AmigaOS version tag is a feature exported to NONE:</p>

<pre>
   amiga_version_tag: STRING <b>is</b> "$VER: make_sofa_version 1.0 (30.3.00)"
         -- <i>tag for AmigaOS "version" command</i>
</pre>

<p>In a client class, all you have to do is declare an attribute of
the same type as the class just created, and initialize it:</p>

<pre>
   info: MAKE_SOFA_VERSION_INFO;
   ...

   !! info.make
</pre>

<p>After that, you could use the following code to display the version
number:</p>

<pre>
   print("this is version ")
   print(info.version)
   print(".")
   print(info.release)
</pre>

<h2>About the Source</h2>

<p>The source code of <kbd>make_sofa_version_info</kbd> is an example for
several things:</p>

<ul>

<li>The <a href="Makefile">Makefile</a> shows how to generate a version information
class <a href="make_sofa_version_info.e">MAKE_SOFA_VERSION_INFO</a>.

<li>The root class <a href="make_sofa_version.e">MAKE_SOFA_VERSION</a> shows how
to use this information in e.g. a header message

<li>The class <a
href="make_sofa_version_options.e">MAKE_SOFA_VERSION_OPTIONS</a>
contains a command line option parser generated by <a
href="../readarghh/welcome.html">readarghh</a>.

</ul>







</body></html>



